<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_orange.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/th.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <?!= include('Stylesheet.html'); ?>
  </head>
  <body>

    <div id="page-add" class="container page-section active">
      <div class="card">
        <h2 id="form-title">üç≥ ‡∏à‡∏î‡∏ö‡∏¥‡∏•‡πÄ‡∏°‡∏ô‡∏π‡πÑ‡∏Ç‡πà</h2>
        <form id="myForm" onsubmit="handleFormSubmit(this)">
          <!-- Hidden field ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏•‡∏Ç‡πÅ‡∏ñ‡∏ß‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
          <input type="hidden" name="row_index" id="row_index">
          
          <div class="d-flex justify-content-center mb-3">
            <input type="radio" class="btn-check" name="type" id="income" value="‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö" autocomplete="off" checked>
            <label class="btn btn-outline-primary me-2 rounded-pill px-4" for="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö üí∞</label>
            <input type="radio" class="btn-check" name="type" id="expense" value="‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢" autocomplete="off">
            <label class="btn btn-outline-danger rounded-pill px-4" for="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ üí∏</label>
          </div>
          <div class="mb-3">
            <label class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
            <input type="text" class="form-control" name="date" required id="datePicker" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
          </div>
          <div class="mb-3">
            <label class="form-label">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á/‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
            <select class="form-select" name="category" id="category">
              <optgroup label="üí∞ ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö">
                <option value="Home (BBL)">üè† Home (BBL)</option>
                <option value="Lineman (Kbank)">üíö Lineman (Kbank)</option>
                <option value="Shopee (TTB)">üß° Shopee (TTB)</option>
                <option value="Grab (Kbank)">üõµ Grab (Kbank)</option>
              </optgroup>
              <optgroup label="üí∏ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢">
                 <option value="‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö (‡∏ó‡∏∏‡∏ô)">ü•ö ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö (‡∏ó‡∏∏‡∏ô)</option>
                 <option value="‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ">üßæ ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
              </optgroup>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label>
            <input type="text" class="form-control" name="detail" id="detail" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡πÑ‡∏Ç‡πà‡πÑ‡∏Å‡πà 3 ‡πÅ‡∏ú‡∏á">
          </div>
          <div class="mb-4">
            <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
            <input type="number" step="0.01" class="form-control" name="amount" id="amount" placeholder="0.00" required inputmode="decimal">
          </div>
          <button type="submit" id="submit-btn" class="btn btn-save">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ üç≥</button>
          <button type="button" id="cancel-edit" class="btn btn-link w-100 mt-2 text-muted" style="display:none;" onclick="resetForm()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
          <div id="message" class="mt-3 text-center" style="display:none; color:#F39C12; font-weight:bold;"></div>
        </form>
      </div>
    </div>

    <div id="page-stats" class="container page-section">
      <div class="card">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="m-0">üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡πâ‡∏≤‡∏ô</h4>
          <a id="sheet-link" href="#" target="_blank" class="btn btn-sm btn-outline-success rounded-pill">
            <i class="bi bi-file-earmark-spreadsheet"></i> ‡∏î‡∏π‡∏ä‡∏µ‡∏ó
          </a>
        </div>

        <!-- ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà -->
        <div class="row g-2 mb-3 filter-section">
          <div class="col-6">
            <label class="small text-muted">‡πÄ‡∏£‡∏¥‡πà‡∏°</label>
            <input type="text" id="startDate" class="form-control form-control-sm">
          </div>
          <div class="col-6">
            <label class="small text-muted">‡∏ñ‡∏∂‡∏á</label>
            <input type="text" id="endDate" class="form-control form-control-sm">
          </div>
        </div>

        <div class="row g-2 mb-3">
          <div class="col-4">
            <div class="summary-box bg-income">
              <small>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</small><br><span id="totalIncome">0</span>
            </div>
          </div>
          <div class="col-4">
            <div class="summary-box bg-expense">
              <small>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</small><br><span id="totalExpense">0</span>
            </div>
          </div>
          <div class="col-4">
            <div class="summary-box bg-balance">
              <small>‡∏Å‡∏≥‡πÑ‡∏£</small><br><span id="totalBalance">0</span>
            </div>
          </div>
        </div>

        <div style="position: relative; height:200px; width:100%; margin-bottom:20px;">
          <canvas id="expenseChart"></canvas>
        </div>

        <h6 class="text-muted mt-3 d-flex justify-content-between">
          <span>üìù ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
          <span id="itemCount" class="badge bg-light text-dark border">0</span>
        </h6>
        <ul class="list-group list-group-flush" id="recentList" style="font-size: 0.85rem;"></ul>
        <button onclick="loadDashboard()" class="btn btn-sm btn-outline-secondary mt-3 rounded-pill w-100">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
      </div>
    </div>

    <div class="bottom-nav">
      <div class="nav-item active" id="nav-add" onclick="switchPage('page-add', this)">
        <i class="bi bi-plus-circle-fill"></i><span>‡∏à‡∏î‡∏ö‡∏¥‡∏•</span>
      </div>
      <div class="nav-item" id="nav-stats" onclick="switchPage('page-stats', this)">
        <i class="bi bi-pie-chart-fill"></i><span>‡∏î‡∏π‡∏¢‡∏≠‡∏î</span>
      </div>
    </div>

    <?!= include('JavaScript.html'); ?>
  </body>
</html>
